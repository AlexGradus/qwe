const divConti = document.createElement('div');
divConti.className = 'ContiOuter';
const divKeyboardOuter = document.createElement('div');
divKeyboardOuter.className = 'KeyboardOuter';
const divKeyboardGate = document.createElement('div');
divKeyboardGate.className = 'KeyboardGate';
const divKeyboardGate1 = document.createElement('div');
divKeyboardGate1.className = 'KeyboardGate';
const divKeyboardGate2 = document.createElement('div');
divKeyboardGate2.className = 'KeyboardGate';
const divKeyboardGate3 = document.createElement('div');
divKeyboardGate3.className = 'KeyboardGate';
const divKeyboardGate4 = document.createElement('div');
divKeyboardGate4.className = 'KeyboardGate';
const InputInside = document.createElement('textarea');
InputInside.className = 'KeyboardInput';
const Information = document.createElement('div');
Information.innerHTML = 'Создано на MAC,переключение клавиатуры левый ALT+CTRL';
Information.className = 'Information';
const Key1E = document.createElement('div');
Key1E.className = 'Backquote';
Key1E.innerHTML = '§';
const Key2 = document.createElement('div');
Key2.className = 'Key1 KeyA';
Key2.innerHTML = '1';
const Key3 = document.createElement('div');
Key3.className = 'Key1 KeyA';
Key3.innerHTML = '2';
const Key4 = document.createElement('div');
Key4.className = 'Key1 KeyA';
Key4.innerHTML = '3';
const Key5 = document.createElement('div');
Key5.className = 'Key1 KeyA';
Key5.innerHTML = '4';
const Key6 = document.createElement('div');
Key6.className = 'Key1 KeyA';
Key6.innerHTML = '5';
const Key7 = document.createElement('div');
Key7.className = 'Key1 KeyA';
Key7.innerHTML = '6';
const Key8 = document.createElement('div');
Key8.className = 'Key1 KeyA';
Key8.innerHTML = '7';
const Key9 = document.createElement('div');
Key9.className = 'Key1 KeyA';
Key9.innerHTML = '8';
const Key10 = document.createElement('div');
Key10.className = 'Key1 KeyA';
Key10.innerHTML = '9';
const Key11 = document.createElement('div');
Key11.className = 'Key1 KeyA';
Key11.innerHTML = '0';
const Key12 = document.createElement('div');
Key12.className = 'Key1 KeyA';
Key12.innerHTML = '-';
const Key13 = document.createElement('div');
Key13.className = 'Key1 KeyA';
Key13.innerHTML = '=';
const Key14 = document.createElement('div');
Key14.className = 'Key1 Backspace';
Key14.innerHTML = 'Backspace';

const Key15 = document.createElement('div');
Key15.className = 'Key1 Tab';
Key15.innerHTML = 'TAB';
const Key16 = document.createElement('div');
Key16.className = 'Key KeyEn';
Key16.innerHTML = 'Q';
const Key16R = document.createElement('div');
Key16R.className = 'KeyR';
Key16R.innerHTML = 'Й';
const Key17 = document.createElement('div');
Key17.className = 'Key KeyEn';
Key17.innerHTML = 'W';
const Key17R = document.createElement('div');
Key17R.className = 'KeyR';
Key17R.innerHTML = 'Ц';
const Key18 = document.createElement('div');
Key18.className = 'Key KeyEn';
Key18.innerHTML = 'E';
const Key18R = document.createElement('div');
Key18R.className = 'KeyR';
Key18R.innerHTML = 'У';
const Key19 = document.createElement('div');
Key19.className = 'Key KeyEn';
Key19.innerHTML = 'R';
const Key19R = document.createElement('div');
Key19R.className = 'KeyR';
Key19R.innerHTML = 'К';
const Key20 = document.createElement('div');
Key20.className = 'Key KeyEn';
Key20.innerHTML = 'T';
const Key20R = document.createElement('div');
Key20R.className = 'KeyR';
Key20R.innerHTML = 'Е';
const Key21 = document.createElement('div');
Key21.className = 'Key KeyEn';
Key21.innerHTML = 'Y';
const Key21R = document.createElement('div');
Key21R.className = 'KeyR';
Key21R.innerHTML = 'Н';
const Key22 = document.createElement('div');
Key22.className = 'Key KeyEn';
Key22.innerHTML = 'U';
const Key22R = document.createElement('div');
Key22R.className = 'KeyR';
Key22R.innerHTML = 'Г';
const Key23 = document.createElement('div');
Key23.className = 'Key KeyEn';
Key23.innerHTML = 'I';
const Key23R = document.createElement('div');
Key23R.className = 'KeyR';
Key23R.innerHTML = 'Ш';
const Key24 = document.createElement('div');
Key24.className = 'Key KeyEn';
Key24.innerHTML = 'O';
const Key24R = document.createElement('div');
Key24R.className = 'KeyR';
Key24R.innerHTML = 'Щ';
const Key25 = document.createElement('div');
Key25.className = 'Key KeyEn';
Key25.innerHTML = 'P';
const Key25R = document.createElement('div');
Key25R.className = 'KeyR';
Key25R.innerHTML = 'З';
const Key26 = document.createElement('div');
Key26.className = 'Key KeyEn';
Key26.innerHTML = '[';
const Key26R = document.createElement('div');
Key26R.className = 'KeyR';
Key26R.innerHTML = 'Х';
const Key27 = document.createElement('div');
Key27.className = 'Key KeyEn';
Key27.innerHTML = ']';
const Key27R = document.createElement('div');
Key27R.className = 'KeyR';
Key27R.innerHTML = 'Ъ';

const Key28 = document.createElement('div');
Key28.className = 'Key1 Caps_Lock';
Key28.innerHTML = 'Caps Lock';
const Key29 = document.createElement('div');
Key29.className = 'Key KeyEn';
Key29.innerHTML = 'A';
const Key29R = document.createElement('div');
Key29R.className = 'KeyR';
Key29R.innerHTML = 'Ф';
const Key30 = document.createElement('div');
Key30.className = 'Key KeyEn';
Key30.innerHTML = 'S';
const Key30R = document.createElement('div');
Key30R.className = 'KeyR';
Key30R.innerHTML = 'Ы';
const Key31 = document.createElement('div');
Key31.className = 'Key KeyEn';
Key31.innerHTML = 'D';
const Key31R = document.createElement('div');
Key31R.className = 'KeyR';
Key31R.innerHTML = 'В';
const Key32 = document.createElement('div');
Key32.className = 'Key KeyEn';
Key32.innerHTML = 'F';
const Key32R = document.createElement('div');
Key32R.className = 'KeyR';
Key32R.innerHTML = 'А';
const Key33 = document.createElement('div');
Key33.className = 'Key KeyEn';
Key33.innerHTML = 'G';
const Key33R = document.createElement('div');
Key33R.className = 'KeyR';
Key33R.innerHTML = 'П';
const Key34 = document.createElement('div');
Key34.className = 'Key KeyEn';
Key34.innerHTML = 'H';
const Key34R = document.createElement('div');
Key34R.className = 'KeyR';
Key34R.innerHTML = 'Р';
const Key35 = document.createElement('div');
Key35.className = 'Key KeyEn';
Key35.innerHTML = 'J';
const Key35R = document.createElement('div');
Key35R.className = 'KeyR';
Key35R.innerHTML = 'О';
const Key36 = document.createElement('div');
Key36.className = 'Key KeyEn';
Key36.innerHTML = 'K';
const Key36R = document.createElement('div');
Key36R.className = 'KeyR';
Key36R.innerHTML = 'Л';
const Key37 = document.createElement('div');
Key37.className = 'Key KeyEn';
Key37.innerHTML = 'L';
const Key37R = document.createElement('div');
Key37R.className = 'KeyR';
Key37R.innerHTML = 'Д';
const Key38 = document.createElement('div');
Key38.className = 'Key KeyEn';
Key38.innerHTML = ';';
const Key38R = document.createElement('div');
Key38R.className = 'KeyR ';
Key38R.innerHTML = 'Ж';
const Key39 = document.createElement('div');
Key39.className = 'Key KeyEn';
Key39.innerHTML = '\'';
const Key39R = document.createElement('div');
Key39R.className = 'KeyR';
Key39R.innerHTML = 'Э';
const Key40 = document.createElement('div');
Key40.className = 'Key KeyEn SlashBack';
Key40.innerHTML = '﹨';
const Key40R = document.createElement('div');
Key40R.className = 'KeyR SlashBack';
Key40R.innerHTML = 'Ё';
const Key41 = document.createElement('div');
Key41.className = 'Key1 Enter';
Key41.innerHTML = 'Enter';
const Key42 = document.createElement('div');
Key42.className = 'Key1 Shift_left Shift';
Key42.innerHTML = 'SHIFT';
const Key43 = document.createElement('div');
Key43.className = 'Key1 KeyA IntSlash';
Key43.innerHTML = '`';
const Key44 = document.createElement('div');
Key44.className = 'Key KeyEn';
Key44.innerHTML = 'Z';
const Key44R = document.createElement('div');
Key44R.className = 'KeyR';
Key44R.innerHTML = 'Я';
const Key45 = document.createElement('div');
Key45.className = 'Key KeyEn';
Key45.innerHTML = 'X';
const Key45R = document.createElement('div');
Key45R.className = 'KeyR';
Key45R.innerHTML = 'Ч';
const Key46 = document.createElement('div');
Key46.className = 'Key KeyEn';
Key46.innerHTML = 'C';
const Key46R = document.createElement('div');
Key46R.className = 'KeyR';
Key46R.innerHTML = 'С';
const Key47 = document.createElement('div');
Key47.className = 'Key KeyEn';
Key47.innerHTML = 'V';
const Key47R = document.createElement('div');
Key47R.className = 'KeyR';
Key47R.innerHTML = 'М';
const Key48 = document.createElement('div');
Key48.className = 'Key KeyEn';
Key48.innerHTML = 'B';
const Key48R = document.createElement('div');
Key48R.className = 'KeyR';
Key48R.innerHTML = 'И';
const Key49 = document.createElement('div');
Key49.className = 'Key KeyEn';
Key49.innerHTML = 'N';
const Key49R = document.createElement('div');
Key49R.className = 'KeyR';
Key49R.innerHTML = 'Т';
const Key50 = document.createElement('div');
Key50.className = 'Key KeyEn';
Key50.innerHTML = 'M';
const Key50R = document.createElement('div');
Key50R.className = 'KeyR';
Key50R.innerHTML = 'Ь';
const Key51 = document.createElement('div');
Key51.className = 'Key KeyEn';
Key51.innerHTML = ',';
const Key51R = document.createElement('div');
Key51R.className = 'KeyR';
Key51R.innerHTML = 'Б';
const Key52 = document.createElement('div');
Key52.className = 'Key KeyEn';
Key52.innerHTML = '.';
const Key52R = document.createElement('div');
Key52R.className = 'KeyR';
Key52R.innerHTML = 'Ю';
const Key53 = document.createElement('div');
Key53.className = 'Key KeyP';
Key53.innerHTML = '/';
const Key54 = document.createElement('div');
Key54.className = 'Key1 Shift_right Shift';
Key54.innerHTML = 'SHIFT';

const Key100 = document.createElement('div');
Key100.className = 'Key ArrUP';
Key100.innerHTML = '↑';

const Key55 = document.createElement('div');
Key55.className = 'Key';
Key55.innerHTML = 'Fn';
const Key56 = document.createElement('div');
Key56.className = 'Key1 Ctrl Ctrl_left';
Key56.innerHTML = 'Ctrl';
const Key57 = document.createElement('div');
Key57.className = 'Key1 Alt Alt_left';
Key57.innerHTML = 'ALT';
const Key58 = document.createElement('div');
Key58.className = 'Key1 Cmd CmdLeft';
Key58.innerHTML = 'Cmd';
const Key59 = document.createElement('div');
Key59.className = 'Key1 Space';
Key59.innerHTML = ' ';
const Key60 = document.createElement('div');
Key60.className = 'Key1 Cmd CmdRight';
Key60.innerHTML = 'Cmd';
const Key61 = document.createElement('div');
Key61.className = 'Key1 Alt Alt_right';
Key61.innerHTML = 'ALT';
const Key62 = document.createElement('div');
Key62.className = 'Key1 ArrLeft KeyA';
Key62.innerHTML = '←';
const Key63 = document.createElement('div');
Key63.className = 'Key ArrDown';
Key63.innerHTML = '↓';

const Key64 = document.createElement('div');
Key64.className = 'Key ArrRight';
Key64.innerHTML = '→';

document.body.append(divConti);
divConti.appendChild(InputInside);
divConti.appendChild(divKeyboardOuter);
divKeyboardOuter.appendChild(divKeyboardGate);
divKeyboardGate.appendChild(Key1E);
divKeyboardGate.appendChild(Key2);
divKeyboardGate.appendChild(Key3);
divKeyboardGate.appendChild(Key4);
divKeyboardGate.appendChild(Key5);
divKeyboardGate.appendChild(Key6);
divKeyboardGate.appendChild(Key7);
divKeyboardGate.appendChild(Key8);
divKeyboardGate.appendChild(Key9);
divKeyboardGate.appendChild(Key10);
divKeyboardGate.appendChild(Key11);
divKeyboardGate.appendChild(Key12);
divKeyboardGate.appendChild(Key13);
divKeyboardGate.appendChild(Key14);
divKeyboardOuter.appendChild(divKeyboardGate1);
divKeyboardGate1.appendChild(Key15);
divKeyboardGate1.appendChild(Key16);
divKeyboardGate1.appendChild(Key16R);
divKeyboardGate1.appendChild(Key17);
divKeyboardGate1.appendChild(Key17R);
divKeyboardGate1.appendChild(Key18);
divKeyboardGate1.appendChild(Key18R);
divKeyboardGate1.appendChild(Key19);
divKeyboardGate1.appendChild(Key19R);
divKeyboardGate1.appendChild(Key20);
divKeyboardGate1.appendChild(Key20R);
divKeyboardGate1.appendChild(Key21);
divKeyboardGate1.appendChild(Key21R);
divKeyboardGate1.appendChild(Key22);
divKeyboardGate1.appendChild(Key22R);
divKeyboardGate1.appendChild(Key23);
divKeyboardGate1.appendChild(Key23R);
divKeyboardGate1.appendChild(Key24);
divKeyboardGate1.appendChild(Key24R);
divKeyboardGate1.appendChild(Key25);
divKeyboardGate1.appendChild(Key25R);
divKeyboardGate1.appendChild(Key26);
divKeyboardGate1.appendChild(Key26R);
divKeyboardGate1.appendChild(Key27);
divKeyboardGate1.appendChild(Key27R);
divKeyboardOuter.appendChild(divKeyboardGate2);
divKeyboardGate2.appendChild(Key28);
divKeyboardGate2.appendChild(Key29);
divKeyboardGate2.appendChild(Key29R);
divKeyboardGate2.appendChild(Key30);
divKeyboardGate2.appendChild(Key30R);
divKeyboardGate2.appendChild(Key31);
divKeyboardGate2.appendChild(Key31R);
divKeyboardGate2.appendChild(Key32);
divKeyboardGate2.appendChild(Key32R);
divKeyboardGate2.appendChild(Key33);
divKeyboardGate2.appendChild(Key33R);
divKeyboardGate2.appendChild(Key34);
divKeyboardGate2.appendChild(Key34R);
divKeyboardGate2.appendChild(Key35);
divKeyboardGate2.appendChild(Key35R);
divKeyboardGate2.appendChild(Key36);
divKeyboardGate2.appendChild(Key36R);
divKeyboardGate2.appendChild(Key37);
divKeyboardGate2.appendChild(Key37R);
divKeyboardGate2.appendChild(Key38);
divKeyboardGate2.appendChild(Key38R);
divKeyboardGate2.appendChild(Key39);
divKeyboardGate2.appendChild(Key39R);
divKeyboardGate2.appendChild(Key40);
divKeyboardGate2.appendChild(Key40R);
divKeyboardGate2.appendChild(Key41);

divKeyboardOuter.appendChild(divKeyboardGate3);
divKeyboardGate3.appendChild(Key42);
divKeyboardGate3.appendChild(Key43);
divKeyboardGate3.appendChild(Key44);
divKeyboardGate3.appendChild(Key44R);
divKeyboardGate3.appendChild(Key45);
divKeyboardGate3.appendChild(Key45R);
divKeyboardGate3.appendChild(Key46);
divKeyboardGate3.appendChild(Key46R);
divKeyboardGate3.appendChild(Key47);
divKeyboardGate3.appendChild(Key47R);
divKeyboardGate3.appendChild(Key48);
divKeyboardGate3.appendChild(Key48R);
divKeyboardGate3.appendChild(Key49);
divKeyboardGate3.appendChild(Key49R);
divKeyboardGate3.appendChild(Key50);
divKeyboardGate3.appendChild(Key50R);
divKeyboardGate3.appendChild(Key51);
divKeyboardGate3.appendChild(Key51R);
divKeyboardGate3.appendChild(Key52);
divKeyboardGate3.appendChild(Key52R);
divKeyboardGate3.appendChild(Key53);
divKeyboardGate3.appendChild(Key100);
divKeyboardGate3.appendChild(Key54);

divKeyboardOuter.appendChild(divKeyboardGate4);

divKeyboardGate4.appendChild(Key56);
divKeyboardGate4.appendChild(Key57);
divKeyboardGate4.appendChild(Key58);
divKeyboardGate4.appendChild(Key59);
divKeyboardGate4.appendChild(Key60);
divKeyboardGate4.appendChild(Key61);
divKeyboardGate4.appendChild(Key62);
divKeyboardGate4.appendChild(Key63);
divKeyboardGate4.appendChild(Key64);
divConti.appendChild(Information);

const a = {
  81: 'Й',
  87: 'Ц',
  69: 'У',
  82: 'К',
  84: 'Е',
  89: 'Н',
  85: 'Г',
  73: 'Ш',
  79: 'Щ',
  80: 'З',
  219: 'Х',
  221: 'Ъ',
  65: 'Ф',
  83: 'Ы',
  68: 'В',
  70: 'А',
  71: 'П',
  72: 'Р',
  74: 'О',
  75: 'Л',
  76: 'Д',
  186: 'Ж',
  222: 'Э',
  220: 'Ё',
  90: 'Я',
  88: 'Ч',
  67: 'С',
  86: 'М',
  66: 'И',
  78: 'Т',
  77: 'Ь',
  188: 'Б',
  190: 'Ю',
};

const b = {
  81: 'Q',
  87: 'W',
  69: 'E',
  82: 'R',
  84: 'T',
  89: 'Y',
  85: 'U',
  73: 'I',
  79: 'O',
  80: 'P',
  219: '[',
  221: ']',
  65: 'A',
  83: 'S',
  68: 'D',
  70: 'F',
  71: 'G',
  72: 'H',
  74: 'J',
  75: 'K',
  76: 'L',
  186: ';',
  222: '\'',
  220: '﹨',
  90: 'Z',
  88: 'X',
  67: 'C',
  86: 'V',
  66: 'B',
  78: 'N',
  77: 'M',
  188: ',',
  190: '.',
  191: '/',
};

let Info = localStorage.getItem('Value');

const Key = document.querySelectorAll('.Key');
const Key1 = document.querySelectorAll('.Key1');

const KeyEn = document.querySelectorAll('.KeyEn');
const KeyR = document.querySelectorAll('.KeyR');
const Space = document.querySelector('.Space');
const ShiftLeft = document.querySelector('.Shift_left');
const ShiftRight = document.querySelector('.Shift_right');
const CapsLock = document.querySelector('.Caps_Lock');
const Tab = document.querySelector('.Tab');
const SlashBack = document.querySelector('.SlashBack');
const CtrlLeft = document.querySelector('.Ctrl_left');
const AltLeft = document.querySelector('.Alt_left');
const AltRight = document.querySelector('.Alt_right');
const ArrUP = document.querySelector('.ArrUP');
const ArrRight = document.querySelector('.ArrRight');
const ArrDown = document.querySelector('.ArrDown');
const ArrLeft = document.querySelector('.ArrLeft');
const KeyP = document.querySelector('.KeyP');
const Backquote = document.querySelector('.Backquote');

const KeyboardInput = document.querySelector('.KeyboardInput');
const Enter = document.querySelector('.Enter');
const Backspace = document.querySelector('.Backspace');
const CmdLeft = document.querySelector('.CmdLeft');
const CmdRight = document.querySelector('.CmdRight');

const ContiOuter = document.querySelector('.ContiOuter');
const KeyboardOuter = document.querySelector('.KeyboardOuter');
const KeyA = document.querySelectorAll('.KeyA');
const IntSlash = document.querySelector('.IntSlash');
let ShiftPosition = false;
InputInside.focus();
for (let i = 0; i < KeyA.length; i += 1) {
  KeyA[i].setAttribute('PositionA', KeyA[i].innerText);
  KeyA[i].setAttribute('lowerPositionA', KeyA[i].innerText.toLowerCase());
}
for (let i = 0; i < Key.length; i += 1) {
  Key[i].setAttribute('Position', Key[i].innerText);
  Key[i].setAttribute('lowerPosition', Key[i].innerText.toLowerCase());
}
for (let i = 0; i < Key1.length; i += 1) {
  Key1[i].setAttribute('Position', Key1[i].innerText);
  Key1[i].setAttribute('lowerPosition', Key1[i].innerText.toLowerCase());
}
for (let i = 0; i < KeyR.length; i += 1) {
  KeyR[i].setAttribute('PositionR', KeyR[i].innerText);
  KeyR[i].setAttribute('lowerPositionR', KeyR[i].innerText.toLowerCase());
}

let Notice = false;
if (Info === 'Russian') {
  ContiOuter.classList.add('Rus');
  for (let i = 0; i < KeyEn.length; i += 1) {
    KeyEn[i].classList.add('Russian');
  }
  for (let i = 0; i < KeyR.length; i += 1) {
    KeyR[i].classList.add('English');
  }
}

window.addEventListener('keydown', (e) => {
  if (e.code === 'Backquote') {
    e.preventDefault();
    Backquote.classList.add('Active');
    KeyboardInput.value += '§';
    return;
  }
  if (e.code === 'IntlBackslash') {
    e.preventDefault();
    IntSlash.classList.add('Active');
    KeyboardInput.value += '`';
    return;
  }

  if (e.code === 'CapsLock') {
    CapsLock.classList.toggle('Active');
  }
  if (e.code === 'Tab') {
    e.preventDefault();
    Tab.classList.add('Active');
    KeyboardInput.value += ' ';
  }
  if (e.code === 'AltLeft') {
    Notice = true;
    AltLeft.classList.add('Active');
  }
  if (e.code === 'ControlLeft' && Notice) {
    ContiOuter.classList.toggle('Rus');
    for (let i = 0; i < KeyEn.length; i += 1) {
      KeyEn[i].classList.toggle('Russian');
      if (Info !== 'Russian') {
        Info = 'Russian';
      } else Info = '1';
      localStorage.setItem('Value', Info);
    }
    for (let i = 0; i < KeyR.length; i += 1) {
      KeyR[i].classList.toggle('English');
    }

    Notice = false;
  }

  if (e.code === 'ArrowLeft') {
    ArrLeft.classList.add('Active');
    e.preventDefault();

    KeyboardInput.value += '←';
  }
  if (e.code === 'ArrowRight') {
    ArrRight.classList.add('Active');
    e.preventDefault();
    KeyboardInput.value += '→';
  }
  if (e.code === 'ArrowDown') {
    ArrDown.classList.add('Active');
    e.preventDefault();
    KeyboardInput.value += '↓';
  }
  if (e.code === 'ArrowUp') {
    ArrUP.classList.add('Active');
    e.preventDefault();
    KeyboardInput.value += '↑';
  }
  if (e.code === 'AltRight') {
    AltRight.classList.add('Active');
  }
  if (e.code === 'Space') {
    Space.classList.add('Active');
  }
  if (e.keyCode === 220) {
    SlashBack.classList.add('Active');
  }

  if (e.keyCode === 191) {
    KeyP.classList.add('Active');
  }
  if (e.keyCode === 91) {
    CmdLeft.classList.add('Active');
  }
  if (e.keyCode === 93) {
    CmdRight.classList.add('Active');
  }
  if (e.code === 'ControlLeft') {
    CtrlLeft.classList.add('Active');
  }

  if (e.code === 'ShiftLeft') {
    ShiftLeft.classList.add('Active');

    ShiftPosition = true;
  }

  if (e.code === 'ShiftRight') {
    ShiftRight.classList.add('Active');

    ShiftPosition = true;
  }
  for (let i = 0; i < Key1.length; i += 1) {
    if (e.key === Key1[i].getAttribute('Position') || e.key === Key1[i].getAttribute('lowerPosition')) {
      Key1[i].classList.add('Active');
    }
  }
  if (!(ContiOuter.classList.contains('Rus'))) {
    for (let i = 0; i < Key.length; i += 1) {
      if (b[e.keyCode] === Key[i].getAttribute('Position') || e.key === Key[i].getAttribute('lowerPosition')) {
        e.preventDefault();
        Key[i].classList.add('Active');
        if (CapsLock.classList.contains('Active') && ShiftPosition) {
          KeyboardInput.value += `${b[e.keyCode]}`.toLowerCase();
        } else if (CapsLock.classList.contains('Active')) {
          KeyboardInput.value += `${b[e.keyCode]}`;
        } else if (ShiftPosition) {
          KeyboardInput.value += `${b[e.keyCode]}`;
        } else KeyboardInput.value += `${b[e.keyCode]}`.toLowerCase();
      }
    }
  }

  if (ContiOuter.classList.contains('Rus')) {
    for (let i = 0; i < KeyR.length; i += 1) {
      if (a[e.keyCode] === KeyR[i].getAttribute('PositionR') || a[e.keyCode] === KeyR[i].getAttribute('lowerPositionR')) {
        e.preventDefault();
        KeyR[i].classList.add('Active');
        if (CapsLock.classList.contains('Active') && ShiftPosition) {
          KeyboardInput.value += `${a[e.keyCode]}`.toLowerCase();
        } else if (CapsLock.classList.contains('Active')) {
          KeyboardInput.value += `${a[e.keyCode]}`;
        } else if (ShiftPosition) {
          KeyboardInput.value += `${a[e.keyCode]}`;
        } else KeyboardInput.value += `${a[e.keyCode]}`.toLowerCase();
      }
    }
  }
});

window.addEventListener('keyup', (e) => {
  if (e.code === 'IntlBackslash') {
    IntSlash.classList.remove('Active');
  }
  if (e.code === 'Backquote') {
    Backquote.classList.remove('Active');
  }
  if (e.keyCode === 191) {
    KeyP.classList.remove('Active');
  }
  if (e.keyCode === 91) {
    CmdLeft.classList.remove('Active');
  }
  if (e.keyCode === 93) {
    CmdRight.classList.remove('Active');
  }
  if (e.code === 'ArrowLeft') {
    ArrLeft.classList.remove('Active');
  }
  if (e.code === 'ArrowRight') {
    ArrRight.classList.remove('Active');
  }
  if (e.code === 'ArrowDown') {
    ArrDown.classList.remove('Active');
  }
  if (e.code === 'ArrowUp') {
    ArrUP.classList.remove('Active');
  }
  if (e.code === 'AltLeft') {
    AltLeft.classList.remove('Active');
  }
  if (e.code === 'AltRight') {
    AltRight.classList.remove('Active');
  }

  if (e.code === 'Space') {
    Space.classList.remove('Active');
  }
  if (e.code === 'ControlLeft') {
    CtrlLeft.classList.remove('Active');
  }
  if (e.code === 'Tab') {
    Tab.classList.remove('Active');
  }
  if (e.keyCode === 220) {
    SlashBack.classList.remove('Active');
  }
  if (e.code === 'ShiftLeft') {
    ShiftLeft.classList.remove('Active');
    ShiftPosition = false;
  }
  if (e.code === 'ShiftRight') {
    ShiftRight.classList.remove('Active');
    ShiftPosition = false;
  }
  if (!(ContiOuter.classList.contains('Rus'))) {
    for (let i = 0; i < Key.length; i += 1) {
      if (b[e.keyCode] === Key[i].getAttribute('Position') || e.key === Key[i].getAttribute('lowerPosition')) {
        e.preventDefault();
        Key[i].classList.remove('Active');
      }
    }
  }

  for (let i = 0; i < Key1.length; i += 1) {
    if (e.key === Key1[i].getAttribute('Position') || e.key === Key1[i].getAttribute('lowerPosition')) {
      Key1[i].classList.remove('Active');
    }
  }

  if (ContiOuter.classList.contains('Rus')) {
    for (let i = 0; i < KeyR.length; i += 1) {
      if (a[e.keyCode] === KeyR[i].getAttribute('PositionR') || a[e.keyCode] === KeyR[i].getAttribute('lowerPositionR')) {
        e.preventDefault();
        KeyR[i].classList.remove('Active');
      }
    }
  }
});

KeyboardOuter.addEventListener('click', (e) => {
  for (let i = 0; i < KeyA.length; i += 1) {
    if (e.target.innerHTML === KeyA[i].getAttribute('PositionA') || e.target.innerHTML === KeyA[i].getAttribute('lowerPositionA')) {
      KeyA[i].classList.add('Active');
      setTimeout(() => KeyA[i].classList.remove('Active'), 200);
    }
  }
  if (e.target.classList.contains('Ctrl_left')) {
    CtrlLeft.classList.add('Active');

    setTimeout(() => CtrlLeft.classList.remove('Active'), 200);
  }
  if (e.target.classList.contains('Alt_left')) {
    AltLeft.classList.add('Active');

    setTimeout(() => AltLeft.classList.remove('Active'), 200);
  }
  if (e.target.classList.contains('Alt_right')) {
    AltRight.classList.add('Active');

    setTimeout(() => AltRight.classList.remove('Active'), 200);
  }
  if (e.target.classList.contains('CmdRight')) {
    CmdRight.classList.add('Active');

    setTimeout(() => CmdRight.classList.remove('Active'), 200);
  }
  if (e.target.classList.contains('CmdLeft')) {
    CmdLeft.classList.add('Active');

    setTimeout(() => CmdLeft.classList.remove('Active'), 200);
  }
  if (e.target.classList.contains('Shift_left')) {
    ShiftLeft.classList.add('Active');

    setTimeout(() => ShiftLeft.classList.remove('Active'), 200);
  }
  if (e.target.classList.contains('Shift_right')) {
    ShiftRight.classList.add('Active');

    setTimeout(() => ShiftRight.classList.remove('Active'), 200);
  }

  if (e.target.innerHTML === ' ') {
    Space.classList.add('Active');
    KeyboardInput.value += ' ';
    setTimeout(() => Space.classList.remove('Active'), 200);
  }

  if (e.target.innerHTML === 'Enter') {
    Enter.classList.add('Active');
    KeyboardInput.value += '\n';
    setTimeout(() => Enter.classList.remove('Active'), 200);
  }
  if (e.target.innerHTML === 'TAB') {
    Tab.classList.add('Active');
    KeyboardInput.value += ' ';
    setTimeout(() => Tab.classList.remove('Active'), 200);
  }

  if (e.target.innerHTML === 'Caps Lock') {
    CapsLock.classList.toggle('Active');
  }
  if (e.target.innerHTML === 'Backspace') {
    KeyboardInput.value = KeyboardInput.value.substring(0, KeyboardInput.value.length - 1);
    Backspace.classList.add('Active');

    setTimeout(() => Backspace.classList.remove('Active'), 200);
  }

  if (e.target.innerHTML.length < 2) {
    if (ShiftPosition && CapsLock.classList.contains('Active')) {
      KeyboardInput.value += e.target.innerHTML.toLowerCase();
    } else if (ShiftPosition) {
      KeyboardInput.value += e.target.innerHTML;
    } else if (CapsLock.classList.contains('Active')) {
      KeyboardInput.value += e.target.innerHTML;
    } else KeyboardInput.value += e.target.innerHTML.toLowerCase();

    for (let i = 0; i < KeyR.length; i += 1) {
      if (e.target.innerHTML === KeyR[i].getAttribute('PositionR') || a[e.keyCode] === KeyR[i].getAttribute('lowerPositionR')) {
        KeyR[i].classList.add('Active');
        setTimeout(() => KeyR[i].classList.remove('Active'), 200);
      }
    }
    for (let i = 0; i < Key.length; i += 1) {
      if (e.target.innerHTML === Key[i].getAttribute('Position') || a[e.keyCode] === Key[i].getAttribute('lowerPosition')) {
        Key[i].classList.add('Active');
        setTimeout(() => Key[i].classList.remove('Active'), 200);
      }
    }
  }
});

KeyboardOuter.addEventListener('mousedown', (e) => {
  if (e.target.innerHTML === 'SHIFT') {
    ShiftPosition = true;
  }
});

KeyboardOuter.addEventListener('mouseup', (e) => {
  if (e.target.innerHTML === 'SHIFT') {
    ShiftPosition = false;
  }

  InputInside.focus();
});
